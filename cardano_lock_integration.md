# Cardano Lock 集成说明

spec: <https://github.com/XuJiandong/docs-bank/pull/8/files>

## 安装和执行 demo 文件

```bash
# 安装 nodejs 环境、yarn
$ yarn install
$ node cardano_lock.js
payload: Uint8Array(32) [
  132, 106,  83, 105, 103, 110,  97, 116,
  117, 114, 101,  49,  88,  70, 162,   1,
   39, 103,  97, 100, 100, 114, 101, 115,
  115,  88,  57,   0, 145, 228, 200, 187
]
paymentKeyHash: Uint8Array(28) [
  145, 237,  76, 139, 190, 110, 235,
   75, 148, 235,  69,  11,  43,  56,
  173,  14, 253, 111, 186, 251, 152,
  195, 113,  70, 106, 154, 206,  18
]
stakeKeyHash: Uint8Array(28) [
  232, 169, 198,  35, 139, 108,  57,
  129, 148,  82, 180,  60, 144, 209,
   23, 118,  65,  40, 142, 205, 121,
   26,  99, 102,  58, 169, 254, 107
]
new_message:  Uint8Array(119) [
  132, 106,  83, 105, 103, 110,  97, 116, 117, 114, 101,  49,
   88,  70, 162,   1,  39, 103,  97, 100, 100, 114, 101, 115,
  115,  88,  57,   0, 145, 237,  76, 139, 190, 110, 235,  75,
  148, 235,  69,  11,  43,  56, 173,  14, 253, 111, 186, 251,
  152, 195, 113,  70, 106, 154, 206,  18, 232, 169, 198,  35,
  139, 108,  57, 129, 148,  82, 180,  60, 144, 209,  23, 118,
   65,  40, 142, 205, 121,  26,  99, 102,  58, 169, 254, 107,
   64,  88,  32, 132, 106,  83, 105, 103, 110,  97, 116, 117,
  114, 101,  49,  88,
  ... 19 more items
]
new_message_hex:  846a5369676e6174757265315846a20127676164647265737358390091ed4c8bbe6eeb4b94eb450b2b38ad0efd6fbafb98c371466a9ace12e8a9c6238b6c39819452b43c90d1177641288ecd791a63663aa9fe6b405820846a5369676e6174757265315846a20127676164647265737358390091e4c8bb
extract payload from new_message: Uint8Array(32) [
  132, 106,  83, 105, 103, 110,  97, 116,
  117, 114, 101,  49,  88,  70, 162,   1,
   39, 103,  97, 100, 100, 114, 101, 115,
  115,  88,  57,   0, 145, 228, 200, 187
]
signature: Uint8Array(64) [
  215, 105, 200,   7,   2, 230, 193,  16,  42, 186, 169,
  227,  35,   1,  34, 197,  30, 196,  16, 249, 100,  63,
   36, 193, 209,  50, 218, 192, 191, 206,   4, 142,  92,
   86,  89,  16, 108, 170, 108,  89, 185,  89, 239, 128,
   37, 220, 164,  75, 176, 175,  36, 116, 204,  21, 189,
   52,  90, 220,   8,  72,  99, 163,  85,  10
]
pubkey: Uint8Array(32) [
  174, 124, 203,  26, 184, 108, 113, 45,
  190, 234, 178, 253, 216, 235, 225,  4,
   97, 158,  64, 246, 112, 179, 127, 18,
  181,  25, 156, 233,  81, 123,  65,  8
]
```

打印的这些分别对应 spec 中的各种值。
可以修改 `cardano_lock.js` main 函数前几行得到不同测试结果作为 cardano_lock 测试集。

```js
const mnemonic = 'wild goat define arctic hard pyramid benefit shrug knock chase tuition survey gentle curtain blossom oblige profit flash town obtain mandate symptom connect payment'
const accountIndex = 0;
const payload = Uint8Array.from(Buffer.from('846a5369676e6174757265315846a20127676164647265737358390091e4c8bb', 'hex'))
```
